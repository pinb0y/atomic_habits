### Atomic Habit
Backend для веб-приложения трекера полезных привычек.
### О проекте

**Технологии:**
- **Django:** Основной фреймворк.
- **Django REST Framework (DRF):** Создание API.
- **PostgreSQL:** База данных.
- **Celery:** Обработка фоновых задач.
- **Redis:** Брокер сообщений для Celery.
- **Telegram Bot API:** Интеграция с Телеграм для отправки напоминаний.
- **CORS:** Взаимодействие с фронтенд-приложением.
- **Docker, Docker Compose**: Для контейнеризации и управления сервисами.

   
####  Версия **Python 3.12**


### Функциональность

- Регистрация и аутентификация пользователей.
- Управление привычками: создание, редактирование, удаление. 
- Настройка напоминаний о привычках.
- Интеграция с Telegram для отправки уведомлений.
- Фоновые задачи с использованием Celery.

### Установка и настройка

#### Клонируйте репозиторий:
```
https://github.com/pinb0y/atomic_habits
```
#### Установите зависимости:
Для запуска проекта и установки зависимостей вам необходимо создать виртуальное окружение, с помощью команды
```
poetry install
```

#### Настройте базу данных в settings.py и выполните миграции:
```
python manage.py migrate
```

#### Настройка переменных окружения:
Создайте файл `.env` в корне проекта и заполните его переменными окружения указанными в файле `.env.sample`.

### Celery
Для обработки фоновых задач (отправки напоминаний) используется Celery.

#### 1. Запуск брокера (Redis)
Убедитесь, что Redis запущен. Установите его через ваш пакетный менеджер или скачайте с [официального сайта Redis](https://redis.io/).

#### 2. Одновременный запуск Celery и планировщика задач
```
celery -A config worker --beat --scheduler django --loglevel=info

```
### Интеграция с Telegram
1. Создайте бота через [BotFather](https://t.me/BotFather) и получите токен.
2. Добавьте токен в переменные окружения (`TELEGRAM_TOKEN`).
3. Включите пользователя в список чатов через метод `start`.

### CORS
CORS настроен для взаимодействия с фронтендом:

- Разрешён доступ с определённых доменов.
- Используется библиотека **django-cors-headers**.

### Запуск через Docker Compose:
Для запуска всех сервисов выполните команду:
```
docker compose up -d
```

#### Состав `docker-compose.yaml`
Файл docker-compose.yaml описывает следующие сервисы:
- **db**: PostgreSQL для хранения данных приложения.
- **redis**: Брокер сообщений для Celery.
- **habits**: Контейнер с Django-приложением: выполняет HTTP-запросы к API.
- **celery**: Фоновый обработчик задач (например, отправка писем).
- **celery-beat**: Периодический планировщик задач для автоматической отправки уведомлений.